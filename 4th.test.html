<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ç¬¬3å›ç¢ºèªãƒ†ã‚¹ãƒˆï¼ˆå¥åº·éšœå®³ï¼‘ï¼‰</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;
      line-height:1.6;color:#333;
      background:linear-gradient(135deg,#a8edea,#fed6e3);
      background-size:cover;background-repeat:no-repeat;background-attachment:fixed;
      padding:20px;margin:0;
    }
    .container{max-width:800px;margin:0 auto;}
    h1,h2{font-family:'Noto Sans JP',sans-serif;font-weight:700;text-align:center;}
    .quiz-container,.result-card{
      background-color:rgba(255,255,255,0.2);
      backdrop-filter:blur(10px);
      border-radius:16px;padding:20px;margin-bottom:20px;
      border:1px solid rgba(255,255,255,0.3);
      box-shadow:0 8px 24px rgba(0,0,0,0.2);
    }
    #progress-container{width:100%;background-color:rgba(255,255,255,0.3);border-radius:10px;margin-bottom:5px;padding:4px;}
    #progress-bar{height:12px;width:0%;background:linear-gradient(135deg,#007aff,#5ac8fa);border-radius:6px;transition:width .4s ease-in-out;}
    #progress-info{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding:0 5px;font-weight:bold;font-size:.9em;color:#1d1d1f;}
    .question{font-size:1.3em;margin-bottom:20px;color:#1d1d1f;}
    .options{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;}
    .option{
      background-color:rgba(255,255,255,.7);border:none;border-radius:16px;padding:15px;
      font-size:1em;cursor:pointer;position:relative;overflow:hidden;text-align:center;
      transition:background .3s ease,transform .3s ease,box-shadow .3s ease;
      box-shadow:0 4px 8px rgba(0,0,0,.1);
    }
    .option:hover{background-color:#fff;box-shadow:0 8px 16px rgba(0,0,0,.2);transform:translateY(-2px);}
    .option.selected{color:#fff;}
    .option.disabled{pointer-events:none;}
    .option.correct{background:linear-gradient(135deg,#34c759,#a8e6cf);color:#fff;}
    .option.incorrect{background:linear-gradient(135deg,#ff3b30,#ff9a8b);color:#fff;}
    .explanation{
      margin-top:20px;font-size:1em;color:#333;background-color:rgba(255,255,255,.8);
      border-left:5px solid;border-radius:12px;padding:15px;
      box-shadow:0 4px 8px rgba(0,0,0,.1);display:none;opacity:0;transition:opacity .5s ease;
    }
    .explanation-header{display:flex;align-items:center;margin-bottom:10px;font-weight:bold;}
    .explanation-icon{font-size:1.5em;margin-right:10px;}
    .nav-button{
      background:linear-gradient(135deg,#007aff,#5ac8fa);color:#fff;border:none;border-radius:12px;
      padding:12px 24px;font-size:1em;cursor:pointer;width:100%;margin-top:20px;
      transition:background .3s ease,transform .2s ease,box-shadow .3s ease,opacity .3s ease;
      box-shadow:0 4px 8px rgba(0,0,0,.1);
    }
    .nav-button:hover{background:linear-gradient(135deg,#005bb5,#4aa0d3);box-shadow:0 8px 16px rgba(0,0,0,.2);}
    .nav-button:disabled{background:linear-gradient(135deg,#c7c7cc,#d1d1d6);opacity:.6;cursor:not-allowed;box-shadow:none;transform:none;}
    .nav-button:active{transform:scale(.98);}
    .result-card h3{font-size:1.2em;margin-bottom:10px;}
    .result-status{font-weight:bold;margin-bottom:10px;}
    .correct{color:#34c759;}
    .incorrect{color:#ff3b30;}
    #incorrect-summary{background-color:rgba(255,235,238,.8);border:1px solid #ff3b30;border-radius:12px;padding:15px;margin-bottom:20px;}
    #incorrect-summary h3{margin-top:0;}
    #incorrect-summary a{display:inline-block;margin:5px;padding:5px 10px;background-color:#ff3b30;color:#fff;text-decoration:none;border-radius:8px;transition:background-color .3s;}
    #incorrect-summary a:hover{background-color:#c50000;}
    #attendance-link{background-color:#34c759;color:#fff;padding:15px;border-radius:12px;margin-top:20px;text-align:center;display:none;}
    #attendance-link a{color:#fff;text-decoration:none;font-weight:bold;}

    /* ---- æˆç¸¾ã‚«ãƒ¼ãƒ‰ ---- */
    #summary-card{background:rgba(255,255,255,.3);border:1px solid rgba(255,255,255,.4);padding:25px;}
    .summary-grid{display:flex;align-items:center;justify-content:center;gap:30px;flex-wrap:wrap;}
    .score-display{display:grid;place-items:center;}
    @property --p{syntax:'<number>';inherits:true;initial-value:0;}
    .score-circle{
      --p:20;--b:20px;--c:#34c759;--w:180px;
      width:var(--w);aspect-ratio:1;position:relative;display:inline-grid;margin:5px;
      place-content:center;font-size:2.5em;font-weight:bold;animation:progress-load 1s .5s both;
    }
    .score-circle:before,.score-circle:after{content:"";position:absolute;border-radius:50%;}
    .score-circle:before{
      inset:0;
      background:
        radial-gradient(farthest-side,var(--c) 98%,#0000) top/var(--b) var(--b) no-repeat,
        conic-gradient(var(--c) calc(var(--p)*1%),#0000 0);
      -webkit-mask:radial-gradient(farthest-side,#0000 calc(99% - var(--b)),#000 calc(100% - var(--b)));
              mask:radial-gradient(farthest-side,#0000 calc(99% - var(--b)),#000 calc(100% - var(--b)));
    }
    .score-circle:after{inset:calc(50% - var(--b)/2);background:var(--c);transform:rotate(calc(var(--p)*3.6deg)) translateY(calc(50% - var(--w)/2));}
    @keyframes progress-load{from{--p:0;}}
    .score-percentage small{font-size:.5em;color:#555;}
    .stats-details{display:flex;flex-direction:column;gap:15px;}
    .stat-item{display:flex;align-items:center;background-color:rgba(255,255,255,.5);border-radius:12px;padding:10px 15px;}
    .stat-icon{font-size:1.5em;margin-right:12px;}
    .stat-label{font-size:.9em;color:#333;margin-right:auto;}
    .stat-value{font-size:1.2em;font-weight:bold;color:#000;}
    .feedback-message{text-align:center;margin-top:20px;font-size:1.1em;font-weight:500;padding:10px;border-radius:10px;background-color:rgba(255,255,255,.3);}

    /* ---- ã‹ã‚ã„ã„é«‘é«ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ ---- */
    #skull-celebration{
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      margin:30px 0;
      animation:fadeInBounce 1s ease-out;
    }
    @keyframes fadeInBounce{
      0%{opacity:0;transform:translateY(-50px) scale(0.5);}
      60%{transform:translateY(10px) scale(1.1);}
      100%{opacity:1;transform:translateY(0) scale(1);}
    }
    #skull-celebration svg{
      width:200px;
      height:200px;
      filter:drop-shadow(0 10px 20px rgba(0,0,0,0.2));
      animation:float 3s ease-in-out infinite;
    }
    @keyframes float{
      0%, 100%{transform:translateY(0px);}
      50%{transform:translateY(-15px);}
    }
    #skull-celebration .celebration-text{
      font-size:1.5em;
      font-weight:bold;
      color:#ff1493;
      margin-top:20px;
      text-shadow:2px 2px 4px rgba(0,0,0,0.2);
      animation:textGlow 2s ease-in-out infinite;
    }
    @keyframes textGlow{
      0%, 100%{text-shadow:2px 2px 4px rgba(0,0,0,0.2);}
      50%{text-shadow:0 0 20px rgba(255,20,147,0.8), 2px 2px 4px rgba(0,0,0,0.2);}
    }

    /* ---- ç´™å¹é›ªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ ---- */
    .confetti{
      position:fixed;
      width:10px;
      height:10px;
      background:#ff1493;
      top:-10px;
      animation:confetti-fall 3s linear;
      pointer-events:none;
      z-index:9999;
    }
    @keyframes confetti-fall{
      to{
        transform:translateY(100vh) rotate(360deg);
        opacity:0;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ç¬¬3å›ç¢ºèªãƒ†ã‚¹ãƒˆï¼ˆå¥åº·éšœå®³ï¼‘ï¼‰</h1>

    <div id="quiz-container" class="quiz-container">
      <div id="progress-container"><div id="progress-bar"></div></div>
      <div id="progress-info">
        <div id="progress-text"></div>
        <div id="timer">00:00</div>
      </div>

      <div id="quiz-content">
        <div id="question" class="question"></div>
        <div id="options" class="options"></div>
        <div id="explanation" class="explanation"></div>
      </div>
      <button id="next" class="nav-button" disabled>æ¬¡ã®å•é¡Œ</button>
    </div>

    <div id="result-container"></div>
    <div id="attendance-link"></div>
  </div>

  <script>
    // â€”â€” ã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿ï¼ˆç³–å°¿ç—…ã¨é–¢ç¯€ãƒªã‚¦ãƒãƒï¼‰â€”â€”
    const quizData = [
      {
        "question":"ç³–å°¿ç—…ã®å®šç¾©ã¨ã—ã¦æœ€ã‚‚é©åˆ‡ãªã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        "options":["ã‚¤ãƒ³ã‚¹ãƒªãƒ³ã®ä¸è¶³ã‚„æ©Ÿèƒ½ä¸å…¨ã«ã‚ˆã‚‹é«˜è¡€ç³–çŠ¶æ…‹","ã‚°ãƒ«ã‚«ã‚´ãƒ³ã®éå‰°åˆ†æ³Œã«ã‚ˆã‚‹ä½è¡€ç³–çŠ¶æ…‹","è†µè‡“Î±ç´°èƒã®ç ´å£Šã«ã‚ˆã‚‹ã‚¤ãƒ³ã‚¹ãƒªãƒ³ä¸è¶³","è…æ©Ÿèƒ½ä½ä¸‹ã«ã‚ˆã‚‹è¡€ç³–å€¤ã®ä¸Šæ˜‡"],
        "answer":0,
        "explanation":"ç³–å°¿ç—…ã¯ã€ã‚¤ãƒ³ã‚¹ãƒªãƒ³ã®ä¸è¶³ã‚„æ©Ÿèƒ½ä¸å…¨ã«ã‚ˆã£ã¦è¡€ç³–å€¤ãŒé«˜ã„çŠ¶æ…‹ãŒç¶šãç–¾æ‚£ã§ã™ã€‚"
      },
      {
        "question":"è¡€ç³–å€¤ã‚’ä¸‹ã’ã‚‹ãƒ›ãƒ«ãƒ¢ãƒ³ã€Œã‚¤ãƒ³ã‚¹ãƒªãƒ³ã€ã‚’åˆ†æ³Œã™ã‚‹è†µå³¶ã®ç´°èƒã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        "options":["Î±ç´°èƒ","Î²ç´°èƒ","Î³ç´°èƒ","Î´ç´°èƒ"],
        "answer":1,
        "explanation":"è†µå³¶ã®Î²ç´°èƒï¼ˆBeta cellsï¼‰ãŒã‚¤ãƒ³ã‚¹ãƒªãƒ³ã‚’åˆ†æ³Œã—ã€Î±ç´°èƒï¼ˆAlpha cellsï¼‰ã¯è¡€ç³–å€¤ã‚’ä¸Šã’ã‚‹ã‚°ãƒ«ã‚«ã‚´ãƒ³ã‚’åˆ†æ³Œã—ã¾ã™ã€‚"
      },
      {
        "question":"ã‚¤ãƒ³ã‚¹ãƒªãƒ³ã®ä¸»ãªä½œç”¨ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        "options":["ãƒ–ãƒ‰ã‚¦ç³–ã‚’ç´°èƒã«é‹ã¶","è¡€ç³–å€¤ã‚’ä¸Šæ˜‡ã•ã›ã‚‹","è„‚è‚ªç´°èƒã‚’åˆ†è§£ã™ã‚‹","è‚è‡“ã§ã®ã‚°ãƒªã‚³ãƒ¼ã‚²ãƒ³åˆ†è§£ã‚’ä¿ƒé€²ã™ã‚‹"],
        "answer":0,
        "explanation":"ã‚¤ãƒ³ã‚¹ãƒªãƒ³ã¯ã€ãƒ–ãƒ‰ã‚¦ç³–ï¼ˆã‚°ãƒ«ã‚³ãƒ¼ã‚¹ï¼‰ãŒç­‹è‚‰ã‚„è„‚è‚ªç´°èƒã«å–ã‚Šè¾¼ã¾ã‚Œã‚‹ã®ã‚’åŠ©ã‘ã€è¡€ç³–å€¤ã‚’ä¸‹ã’ã‚‹åƒãã‚’ã—ã¾ã™ã€‚"
      },
      {
        "question":"ã‚¤ãƒ³ã‚¹ãƒªãƒ³ã®ã‚·ã‚°ãƒŠãƒ«ä¼é”ã«ã‚ˆã£ã¦ç´°èƒè†œã¸ç§»å‹•ã—ã€ã‚°ãƒ«ã‚³ãƒ¼ã‚¹ã‚’å–ã‚Šè¾¼ã‚€è¼¸é€æ‹…ä½“ï¼ˆãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ã‚¿ãƒ¼ï¼‰ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        "options":["Insulin Receptor","GLUT1","GLUT4 transporter","Vesicle"],
        "answer":2,
        "explanation":"ã‚¤ãƒ³ã‚¹ãƒªãƒ³ãŒå—å®¹ä½“ã«çµåˆã™ã‚‹ã¨ã€ç´°èƒå†…ã«å¾…æ©Ÿã—ã¦ã„ãŸGLUT4ãŒç´°èƒè†œã¸ç§»å‹•ï¼ˆTranslocationï¼‰ã—ã€ã‚°ãƒ«ã‚³ãƒ¼ã‚¹ã‚’å–ã‚Šè¾¼ã¿ã¾ã™ã€‚"
      },
      {
        "question":"éå»1ã€œ2ãƒ¶æœˆã®å¹³å‡è¡€ç³–å€¤ã‚’åæ˜ ã—ã€ç³–å°¿ç—…ã®è¨ºæ–­åŸºæº–ã®ä¸€ã¤ã¨ãªã‚‹æŒ‡æ¨™ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        "options":["ç©ºè…¹æ™‚è¡€ç³–å€¤","éšæ™‚è¡€ç³–å€¤","75gOGTT 2æ™‚é–“å€¤","HbA1c"],
        "answer":3,
        "explanation":"HbA1cï¼ˆãƒ˜ãƒ¢ã‚°ãƒ­ãƒ“ãƒ³ãƒ»ã‚¨ã‚¤ãƒ¯ãƒ³ã‚·ãƒ¼ï¼‰ã¯éå»1ã€œ2ãƒ¶æœˆã®å¹³å‡è¡€ç³–å€¤ã‚’åæ˜ ã™ã‚‹æŒ‡æ¨™ã§ã€6.5%ä»¥ä¸ŠãŒè¨ºæ–­åŸºæº–ã®ä¸€ã¤ã§ã™ã€‚"
      },
      {
        "question":"1å‹ç³–å°¿ç—…ã®ä¸»ãªç™ºç—‡æ©Ÿåºã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        "options":["è†µÎ²ç´°èƒã®è‡ªå·±å…ç–«ã«ã‚ˆã‚‹ç ´å£Š","ã‚¤ãƒ³ã‚¹ãƒªãƒ³æ„Ÿå—æ€§ã®ä½ä¸‹","ç”Ÿæ´»ç¿’æ…£ã®ä¹±ã‚Œã«ã‚ˆã‚‹ã‚¤ãƒ³ã‚¹ãƒªãƒ³åˆ†æ³Œä½ä¸‹","åŠ é½¢ã«ã‚ˆã‚‹è†µæ©Ÿèƒ½ã®ä½ä¸‹"],
        "answer":0,
        "explanation":"1å‹ç³–å°¿ç—…ã¯ã€ä¸»ã«è‡ªå·±å…ç–«ã«ã‚ˆã£ã¦è†µè‡“ã®Î²ç´°èƒãŒæ”»æ’ƒãƒ»ç ´å£Šã•ã‚Œã€ã‚¤ãƒ³ã‚¹ãƒªãƒ³åˆ†æ³Œèƒ½åŠ›ãŒæ¥µåº¦ã«ä½ä¸‹ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦èµ·ã“ã‚Šã¾ã™ã€‚"
      },
      {
        "question":"2å‹ç³–å°¿ç—…ã®ä¸»ãªç‰¹å¾´ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        "options":["æ—¥æœ¬ã®ç³–å°¿ç—…ã®ç´„5%ã‚’å ã‚ã‚‹","ä¸»ã«å°å…æœŸã«ç™ºç—‡ã™ã‚‹","ã‚¤ãƒ³ã‚¹ãƒªãƒ³æŠµæŠ—æ€§ï¼ˆæ„Ÿå—æ€§ã®ä½ä¸‹ï¼‰ãŒé–¢ä¸ã™ã‚‹","æ²»ç™‚ã¯ã‚¤ãƒ³ã‚¹ãƒªãƒ³æ³¨å°„ãŒå¿…é ˆã§ã‚ã‚‹"],
        "answer":2,
        "explanation":"2å‹ç³–å°¿ç—…ã¯ã€ã‚¤ãƒ³ã‚¹ãƒªãƒ³åˆ†æ³Œèƒ½ã®ä½ä¸‹ã‚„ã€è‚è‡“ã‚„ç­‹è‚‰ãªã©ã§ã®ã‚¤ãƒ³ã‚¹ãƒªãƒ³æ„Ÿå—æ€§ã®ä½ä¸‹ï¼ˆã‚¤ãƒ³ã‚¹ãƒªãƒ³æŠµæŠ—æ€§ï¼‰ã«ã‚ˆã£ã¦ç™ºç—‡ã—ã€æ—¥æœ¬ã®ç³–å°¿ç—…ã®95%ä»¥ä¸Šã‚’å ã‚ã¾ã™ã€‚"
      },
      {
        "question":"é«˜è¡€ç³–çŠ¶æ…‹ãŒç¶šãã¨ã€ç³–ã¨è¡€ç®¡å£ã®ã‚¿ãƒ³ãƒ‘ã‚¯è³ªãŒåŒ–å­¦åå¿œã‚’èµ·ã“ã—ç™ºç”Ÿã™ã‚‹ã€è¡€ç®¡å£ã‚’å‚·ã¤ã‘ã‚‹ä¸»ãªç‰©è³ªã¯ä½•ã§ã™ã‹ï¼Ÿ",
        "options":["è¡€å°æ¿","æ´»æ€§é…¸ç´ ","ç³–åŒ–ã‚¿ãƒ³ãƒ‘ã‚¯è³ª","ã‚³ãƒ¬ã‚¹ãƒ†ãƒ­ãƒ¼ãƒ«"],
        "answer":1,
        "explanation":"é«˜è¡€ç³–ãŒç¶šãã¨ã€ç³–ã¨è¡€ç®¡å£ã®ã‚¿ãƒ³ãƒ‘ã‚¯è³ªãŒåŒ–å­¦åå¿œã‚’èµ·ã“ã—æ´»æ€§é…¸ç´ ãŒç™ºç”Ÿã—ã€ãã®å¼·åŠ›ãªé…¸åŒ–ä½œç”¨ã«ã‚ˆã‚Šè¡€ç®¡å£ãŒå‚·ã¤ãã¾ã™ã€‚"
      },
      {
        "question":"ç³–å°¿ç—…ã®3å¤§åˆä½µç—‡ï¼ˆç´°å°è¡€ç®¡éšœå®³ï¼‰ã«å«ã¾ã‚Œãªã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        "options":["ç³–å°¿ç—…æ€§ç¶²è†œç—‡","ç³–å°¿ç—…æ€§è…ç—‡","ç³–å°¿ç—…æ€§å¿ƒç­‹ç—‡","ç³–å°¿ç—…æ€§ç¥çµŒéšœå®³"],
        "answer":2,
        "explanation":"ç³–å°¿ç—…ã®3å¤§åˆä½µç—‡ã¯ã€ç¶²è†œç—‡ã€è…ç—‡ã€ç¥çµŒéšœå®³ã§ã™ã€‚å¿ƒç­‹ç—‡ã‚„è„³å’ä¸­ãªã©ã®å¿ƒè¡€ç®¡ç–¾æ‚£ã‚‚é‡è¦ãªåˆä½µç—‡ã§ã™ãŒã€ä¸»ã«å¤ªã„è¡€ç®¡ã®å‹•è„ˆç¡¬åŒ–ãŒé–¢ä¸ã—ã¾ã™ã€‚"
      },
      {
        "question":"ç³–å°¿ç—…æ€§ç¶²è†œç—‡ãŒé€²è¡Œã—ã€ç¶²è†œã®è™šè¡€ï¼ˆé…¸ç´ ä¸è¶³ï¼‰ã‚’è£œã†ãŸã‚ã«ç”Ÿãˆã‚‹ã‚‚ã‚ã„è¡€ç®¡ã‚’ä½•ã¨å‘¼ã³ã¾ã™ã‹ï¼Ÿ",
        "options":["å°å‹•è„ˆç˜¤","ç¡¬æ€§ç™½æ–‘","æ–°ç”Ÿè¡€ç®¡","ç¡å­ä½“å‡ºè¡€"],
        "answer":2,
        "explanation":"ç¶²è†œã®è¡€æµãŒæ‚ªããªã‚‹ã¨ã€é…¸ç´ ä¸è¶³ã‚’è£œã†ãŸã‚ã«æ–°ç”Ÿè¡€ç®¡ãŒå¢—ç”Ÿã—ã¾ã™ã€‚ã“ã‚Œã¯éå¸¸ã«ã‚‚ã‚ãã€ç¡å­ä½“å‡ºè¡€ã‚„ç¶²è†œå‰¥é›¢ã®åŸå› ã¨ãªã‚Šã¾ã™ã€‚"
      },
      {
        "question":"ç³–å°¿ç—…æ€§è…ç—‡ã®ç³¸çƒä½“ç—…å¤‰ã¨ã—ã¦ç‰¹å¾´çš„ãªæ‰€è¦‹ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        "options":["ãƒ¡ã‚µãƒ³ã‚®ã‚¦ãƒ åŸºè³ªã®å¢—åŠ ã¨è¶³ç´°èƒã®æ¸›å°‘","ãƒ¡ã‚µãƒ³ã‚®ã‚¦ãƒ ç´°èƒã®æ¸›å°‘","åŸºåº•è†œã®è²è–„åŒ–ï¼ˆè–„ããªã‚‹ã“ã¨ï¼‰","ç³¸çƒä½“æ¯›ç´°è¡€ç®¡ã®æ‹¡å¼µ"],
        "answer":0,
        "explanation":"ç³–å°¿ç—…æ€§è…ç—‡ã§ã¯ã€ãƒ¡ã‚µãƒ³ã‚®ã‚¦ãƒ åŸºè³ªã®å¢—åŠ ã€ãƒ¡ã‚µãƒ³ã‚®ã‚¦ãƒ ç´°èƒã®è‚¥å¤§ã€åŸºåº•è†œã®è‚¥åšã€è¶³ç´°èƒã®æ¸›å°‘ãªã©ãŒèµ·ã“ã‚Šã€ç³¸çƒä½“ç¡¬åŒ–ã«è‡³ã‚Šã¾ã™ã€‚"
      },
      {
        "question":"ç³–å°¿ç—…æ€§è…ç—‡ã®ç—…ç†çµ„ç¹”åƒã§ã€å¢—åŠ ã—ãŸãƒ¡ã‚µãƒ³ã‚®ã‚¦ãƒ åŸºè³ªãŒå½¢æˆã™ã‚‹ç‰¹å¾´çš„ãªçµç¯€æ€§ç—…å¤‰ï¼ˆKimmelstiel-Wilsonç—…å¤‰ï¼‰ã‚’ç¤ºã™ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        "options":["ç³¸çƒä½“å…¨ä½“ã®ç¡¬åŒ–","å°¿ç´°ç®¡ã®èç¸®","è¡€ç®¡å£ã®è‚¥åš","ç³¸çƒä½“å†…ã®ãƒ”ãƒ³ã‚¯è‰²ã®å‡ä¸€ãªå¡Š"],
        "answer":3,
        "explanation":"ç³¸çƒä½“å†…ã®çµç¯€æ€§ç—…å¤‰ï¼ˆKimmelstiel-Wilsonç—…å¤‰ï¼‰ã¯ç³–å°¿ç—…æ€§è…ç—‡ã«ç‰¹å¾´çš„ã§ã™ã€‚"
      },
      {
        "question":"ç³–å°¿ç—…æ€§ç¥çµŒéšœå®³ã®åŸå› ã¨ã—ã¦æŒ™ã’ã‚‰ã‚Œã‚‹äºŒã¤ã®ä¸»ãªè¦å› ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        "options":["ç´°å°è¡€ç®¡ã®éšœå®³ã¨ç¥çµŒç´°èƒã®ä»£è¬éšœå®³","é‹å‹•ç¥çµŒã®éšœå®³ã¨æ„Ÿè¦šç¥çµŒã®éšœå®³","ä¸­æ¢ç¥çµŒã®éšœå®³ã¨æœ«æ¢¢ç¥çµŒã®éšœå®³","æ´»æ€§é…¸ç´ ã®å¢—åŠ ã¨è¡€å°æ¿ã®å‡é›†"],
        "answer":0,
        "explanation":"ç³–å°¿ç—…æ€§ç¥çµŒéšœå®³ã¯ã€ç¥çµŒã«æ „é¤Šã‚’é€ã‚‹ç´°å°è¡€ç®¡ã®éšœå®³ã¨ã€é«˜è¡€ç³–ã«ã‚ˆã‚‹ç¥çµŒç´°èƒè‡ªä½“ã®ä»£è¬éšœå®³ã«ã‚ˆã£ã¦å¼•ãèµ·ã“ã•ã‚Œã¾ã™ã€‚"
      },
      {
        "question":"æ—¥æœ¬ã«ãŠã„ã¦ã€ç³–å°¿ç—…æ€§è…ç—‡ãŒåŸå› ã§ã€Œäººå·¥é€æå°å…¥ã€ã«è‡³ã‚‹äººã¯å¹´é–“ä½•äººä»¥ä¸Šã¨ã•ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ",
        "options":["å¹´é–“ 3,000 äººä»¥ä¸Š","å¹´é–“ 3,500 äººä»¥ä¸Š","å¹´é–“ 10,000 äººä»¥ä¸Š","å¹´é–“ 13,000 äººä»¥ä¸Š"],
        "answer":3,
        "explanation":"ç³–å°¿ç—…ãŒåŸå› ã§äººå·¥é€æã‚’å°å…¥ã™ã‚‹äººã¯å¹´é–“13,000äººä»¥ä¸Šã«ã®ã¼ã‚Šã€é€æå°å…¥åŸå› ã®ç¬¬1ä½ã§ã™ã€‚"
      },
      {
        "question":"è‡ªå·±å…ç–«ç–¾æ‚£ãŒç™ºç—‡ã™ã‚‹æ ¹æœ¬çš„ãªåŸå› ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        "options":["è‡ªå·±åå¿œæ€§Tç´°èƒãŒå­˜åœ¨ã™ã‚‹ã“ã¨","ã‚¦ã‚¤ãƒ«ã‚¹ã‚„ç´°èŒã«æ„ŸæŸ“ã™ã‚‹ã“ã¨","è‡ªå·±ã‚’æŠ‘ãˆã‚‹ä»•çµ„ã¿ï¼ˆè‡ªå·±å¯›å®¹ï¼‰ã®ç ´ç¶»","éºä¼çš„ç´ å› ãŒå¼·ã„ã“ã¨"],
        "answer":2,
        "explanation":"è‡ªå·±å…ç–«ç–¾æ‚£ã®åŸå› ã¯ã€Œè‡ªå·±åå¿œæ€§Tç´°èƒã®å­˜åœ¨ã€ãã®ã‚‚ã®ã§ã¯ãªãã€ã€Œãã‚Œã‚’æŠ‘ãˆã‚‹ä»•çµ„ã¿ï¼ˆè‡ªå·±å¯›å®¹ï¼‰ã®ç ´ç¶»ã€ã§ã‚ã‚‹ã¨çµè«–ä»˜ã‘ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚"
      },
      {
        "question":"é–¢ç¯€ãƒªã‚¦ãƒãƒãŒæ…¢æ€§ã®ç‚ç—‡ã‚’èµ·ã“ã™ã€é–¢ç¯€ã®ä¸»ãªéƒ¨ä½ã¯ã©ã“ã§ã™ã‹ï¼Ÿ",
        "options":["é–¢ç¯€è»Ÿéª¨","é–¢ç¯€ã®éª¨","æ»‘è†œ","é­å¸¯"],
        "answer":2,
        "explanation":"é–¢ç¯€ãƒªã‚¦ãƒãƒã¯ã€å…¨èº«ã®é–¢ç¯€ã®ã€Œæ»‘è†œã€ã«æ…¢æ€§ç‚ç—‡ã‚’èµ·ã“ã™ç–¾æ‚£ã§ã‚ã‚Šã€ç‚ç—‡ã®æŒç¶šãŒè»Ÿéª¨ãƒ»éª¨ã®ç ´å£Šã‚’å¼•ãèµ·ã“ã—ã¾ã™ã€‚"
      },
      {
        "question":"é–¢ç¯€ãƒªã‚¦ãƒãƒã®é–¢ç¯€ç—‡çŠ¶ã®ç‰¹å¾´ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        "options":["æœã®é–¢ç¯€ã®ã“ã‚ã°ã‚ŠãŒã‚ã‚Šã€ä¸¡å´å¯¾ç§°æ€§ã«ãŠã‹ã•ã‚Œã‚‹","å¤•æ–¹ã«é–¢ç¯€ãŒã“ã‚ã°ã‚Šã€ç‰‡å´æ€§ã«ãŠã‹ã•ã‚Œã‚‹","å¤§é–¢ç¯€ã‹ã‚‰å§‹ã¾ã‚Šã€å°é–¢ç¯€ã¸åºƒãŒã‚‹","é–¢ç¯€ã®ç—›ã¿ã¯ã‚ã‚‹ãŒã€å¤‰å½¢ã¯ã—ãªã„"],
        "answer":0,
        "explanation":"é–¢ç¯€ãƒªã‚¦ãƒãƒã¯ã€Œæœã®é–¢ç¯€ã®ã“ã‚ã°ã‚Šã€ãŒåˆç™ºç—‡çŠ¶ã§ã‚ã‚‹ã“ã¨ãŒå¤šãã€æ‰‹è¶³ã®å°é–¢ç¯€ã‹ã‚‰å¤§é–¢ç¯€ã¸ã¨ã€Œä¸¡å´å¯¾ç§°æ€§ã€ã«ãŠã‹ã•ã‚Œã‚‹ã®ãŒç‰¹å¾´ã§ã™ã€‚"
      },
      {
        "question":"æ­£å¸¸ãªé–¢ç¯€æ»‘è†œã®çµ„ç¹”å­¦çš„ç‰¹å¾´ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        "options":["æ»‘è†œç´°èƒãŒå¤šå±¤åŒ–ã—ã¦ã„ã‚‹","æ»‘è†œç´°èƒã¯ä¸€å±¤ã§ã‚ã‚‹","ãƒªãƒ³ãƒ‘æ¿¾èƒãŒå­˜åœ¨ã™ã‚‹","çµ¨æ¯›çŠ¶ã«å¢—ç”Ÿã—ã¦ã„ã‚‹"],
        "answer":1,
        "explanation":"æ­£å¸¸ãªé–¢ç¯€æ»‘è†œã§ã¯ã€é–¢ç¯€è…”ã«é¢ã™ã‚‹æ»‘è†œç´°èƒã¯ä¸€å±¤ã§ã™ã€‚"
      },
      {
        "question":"é–¢ç¯€ãƒªã‚¦ãƒãƒã®æ»‘è†œã«è¦‹ã‚‰ã‚Œã‚‹ç—…ç†çµ„ç¹”å­¦çš„æ‰€è¦‹ã¨ã—ã¦é©åˆ‡ã§ãªã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        "options":["æ»‘è†œã®çµ¨æ¯›çŠ¶å¢—ç”Ÿ","ãƒªãƒ³ãƒ‘æ¿¾èƒã®å½¢æˆ","æ»‘è†œç´°èƒã®å¤šå±¤åŒ–","æ»‘è†œç´°èƒã®ä¸€å±¤åŒ–"],
        "answer":3,
        "explanation":"é–¢ç¯€ãƒªã‚¦ãƒãƒã®æ»‘è†œã§ã¯ã€æ»‘è†œç´°èƒã®å¤šå±¤åŒ–ã€çµ¨æ¯›çŠ¶å¢—ç”Ÿã€ãƒªãƒ³ãƒ‘æ¿¾èƒã®å½¢æˆã€å½¢è³ªç´°èƒã®æµ¸æ½¤ãªã©ãŒç‰¹å¾´çš„ãªæ‰€è¦‹ã§ã‚ã‚Šã€ã€Œä¸€å±¤åŒ–ã€ã¯æ­£å¸¸ãªçŠ¶æ…‹ã§ã™ã€‚"
      },
      {
        "question":"é–¢ç¯€ãƒªã‚¦ãƒãƒã®é–¢ç¯€å¤–ç—‡çŠ¶ã§ã‚ã‚‹ã€Œçš®ä¸‹ãƒªã‚¦ãƒãƒçµç¯€ã€ã®ç—…ç†çµ„ç¹”åƒã§ã€ä¸­å¿ƒéƒ¨ã«è¦‹ã‚‰ã‚Œã‚‹æ‰€è¦‹ã¯ä½•ã§ã™ã‹ï¼Ÿ",
        "options":["ä¸­å¿ƒéƒ¨ã®å£Šæ­»å·£","ãƒªãƒ³ãƒ‘æ¿¾èƒ","è¡€ç®¡æ–°ç”Ÿ","ãƒ•ã‚£ãƒ–ãƒªãƒ³æ²ˆç€"],
        "answer":0,
        "explanation":"çš®ä¸‹ãƒªã‚¦ãƒãƒçµç¯€ï¼ˆãƒªã‚¦ãƒãƒæ§˜çµç¯€ï¼‰ã¯ã€ä¸­å¿ƒéƒ¨ã®å£Šæ­»å·£ã¨ã€ãã‚Œã‚’å–ã‚Šå›²ã‚€é¡ä¸Šçš®ç´°èƒã®æŸµçŠ¶é…åˆ—ãŒç‰¹å¾´çš„ãªç—…ç†æ‰€è¦‹ã§ã™ã€‚"
      }
    ];

    // â€”â€” ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ â€”â€” 
    const $ = (id) => document.getElementById(id);
    function shuffle(array){
      for(let i=array.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [array[i],array[j]] = [array[j],array[i]];
      }
      return array;
    }

    // â€”â€” ç´™å¹é›ªã‚¨ãƒ•ã‚§ã‚¯ãƒˆ â€”â€” 
    function createConfetti(){
      const colors = ['#ff1493','#00bfff','#ffd700','#ff6347','#98fb98','#dda0dd'];
      for(let i=0;i<50;i++){
        setTimeout(()=>{
          const confetti = document.createElement('div');
          confetti.className = 'confetti';
          confetti.style.left = Math.random()*100 + '%';
          confetti.style.backgroundColor = colors[Math.floor(Math.random()*colors.length)];
          confetti.style.animationDuration = (Math.random()*2 + 2) + 's';
          confetti.style.animationDelay = Math.random()*0.5 + 's';
          document.body.appendChild(confetti);
          setTimeout(()=> confetti.remove(), 4000);
        }, i*50);
      }
    }

    // â€”â€” ã‹ã‚ã„ã„é«‘é«SVGã‚’ç”Ÿæˆ â€”â€” 
    function createSkullSVG(){
      return `
        <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
          <!-- é ­è“‹éª¨æœ¬ä½“ -->
          <ellipse cx="100" cy="90" rx="70" ry="75" fill="#f0f0f0" stroke="#333" stroke-width="3"/>
          
          <!-- å·¦ç›® -->
          <ellipse cx="75" cy="80" rx="18" ry="22" fill="#333"/>
          <ellipse cx="78" cy="75" rx="8" ry="10" fill="#fff" opacity="0.6"/>
          <circle cx="80" cy="78" r="3" fill="#fff"/>
          
          <!-- å³ç›® -->
          <ellipse cx="125" cy="80" rx="18" ry="22" fill="#333"/>
          <ellipse cx="128" cy="75" rx="8" ry="10" fill="#fff" opacity="0.6"/>
          <circle cx="130" cy="78" r="3" fill="#fff"/>
          
          <!-- é¼» -->
          <path d="M 95 100 L 100 110 L 105 100 Z" fill="#333"/>
          
          <!-- ç¬‘é¡”ã®å£ -->
          <path d="M 70 125 Q 100 145 130 125" stroke="#333" stroke-width="3" fill="none" stroke-linecap="round"/>
          
          <!-- æ­¯ -->
          <rect x="75" y="123" width="8" height="12" fill="#fff" stroke="#333" stroke-width="1"/>
          <rect x="85" y="125" width="8" height="12" fill="#fff" stroke="#333" stroke-width="1"/>
          <rect x="95" y="127" width="8" height="12" fill="#fff" stroke="#333" stroke-width="1"/>
          <rect x="105" y="125" width="8" height="12" fill="#fff" stroke="#333" stroke-width="1"/>
          <rect x="115" y="123" width="8" height="12" fill="#fff" stroke="#333" stroke-width="1"/>
          
          <!-- é ¬ã®èµ¤ã¿ -->
          <ellipse cx="55" cy="100" rx="12" ry="10" fill="#ff69b4" opacity="0.5"/>
          <ellipse cx="145" cy="100" rx="12" ry="10" fill="#ff69b4" opacity="0.5"/>
          
          <!-- ç‹å†  -->
          <path d="M 50 50 L 55 35 L 60 50 L 75 30 L 90 50 L 100 25 L 110 50 L 125 30 L 140 50 L 145 35 L 150 50 Z" 
                fill="#ffd700" stroke="#ff8c00" stroke-width="2"/>
          
          <!-- ç‹å† ã®å®çŸ³ -->
          <circle cx="75" cy="40" r="4" fill="#ff1493"/>
          <circle cx="100" cy="35" r="5" fill="#00bfff"/>
          <circle cx="125" cy="40" r="4" fill="#ff1493"/>
          
          <!-- ã‚­ãƒ©ã‚­ãƒ©åŠ¹æœ -->
          <g opacity="0.8">
            <path d="M 165 60 l 3 -8 l 3 8 l 8 3 l -8 3 l -3 8 l -3 -8 l -8 -3 z" fill="#ffd700">
              <animateTransform attributeName="transform" type="rotate" 
                from="0 168 63" to="360 168 63" dur="4s" repeatCount="indefinite"/>
            </path>
            <path d="M 35 70 l 2 -6 l 2 6 l 6 2 l -6 2 l -2 6 l -2 -6 l -6 -2 z" fill="#ffd700">
              <animateTransform attributeName="transform" type="rotate" 
                from="0 37 72" to="360 37 72" dur="3s" repeatCount="indefinite"/>
            </path>
          </g>
          
          <!-- ãƒãƒ¼ãƒˆ -->
          <path d="M 100 170 C 80 150, 50 150, 50 130 C 50 110, 70 100, 100 120 C 130 100, 150 110, 150 130 C 150 150, 120 150, 100 170 Z" 
                fill="#ff1493" stroke="#c71585" stroke-width="2" opacity="0.8">
            <animate attributeName="opacity" values="0.8;1;0.8" dur="1.5s" repeatCount="indefinite"/>
          </path>
        </svg>
      `;
    }

    // â€”â€” çŠ¶æ…‹ â€”â€” 
    let current = 0, score = 0, userAnswers = [];
    let order = [];        // å…¨è¨­å•ã®ä¸¦ã³
    let optionOrder = [];  // å„è¨­å•ã”ã¨ã®é¸æŠè‚¢ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä¸¦ã³
    let timer = null, seconds = 0;

    function startTimer(){
      if(timer) clearInterval(timer);
      seconds = 0; $('timer').textContent = '00:00';
      timer = setInterval(()=>{
        seconds++;
        const m = String(Math.floor(seconds/60)).padStart(2,'0');
        const s = String(seconds%60).padStart(2,'0');
        $('timer').textContent = `${m}:${s}`;
      },1000);
    }

    function initQuiz(){
      // è¨­å•ã®é †ç•ªã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«
      order = shuffle([...Array(quizData.length).keys()]);
      // å„è¨­å•ã®é¸æŠè‚¢ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«
      optionOrder = order.map(qi => shuffle([0,1,2,3]));
      userAnswers = Array(quizData.length).fill(null);
      current = 0; score = 0;
      startTimer();
      renderQuestion();
    }

    function renderQuestion(){
      const qIndex = order[current];
      const q = quizData[qIndex];

      // é€²æ—
      const prog = ((current+1)/quizData.length)*100;
      $('progress-bar').style.width = `${prog}%`;
      $('progress-text').textContent = `${current+1} / ${quizData.length} å•`;

      // æœ¬æ–‡
      $('question').textContent = q.question;

      // é¸æŠè‚¢ï¼ˆindexã§å®‰å…¨ã«ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼‰
      const idxOrder = optionOrder[current];
      $('options').innerHTML = idxOrder.map((optIdx,i)=>(
        `<button class="option" data-opt="${optIdx}" onclick="selectOption(${optIdx}, this)">${q.options[optIdx]}</button>`
      )).join('');

      // è§£èª¬ãƒªã‚»ãƒƒãƒˆ
      const exp = $('explanation');
      exp.style.display='none'; exp.style.opacity='0'; exp.innerHTML='';
      $('next').disabled = true;
    }

    window.selectOption = function(originalOptionIndex, el){
      // å…¨ã¦ç„¡åŠ¹åŒ–
      document.querySelectorAll('.option').forEach(o=>o.classList.add('disabled'));
      el.classList.add('selected');

      const qIndex = order[current];
      const q = quizData[qIndex];
      const isCorrect = (originalOptionIndex === q.answer);
      userAnswers[qIndex] = originalOptionIndex;
      if(isCorrect){ el.classList.add('correct'); score++; }
      else{
        el.classList.add('incorrect');
        // æ­£è§£ã«è‰²
        document.querySelectorAll('.option').forEach(o=>{
          const idx = Number(o.getAttribute('data-opt'));
          if(idx === q.answer){ o.classList.add('correct'); }
        });
      }

      const exp = $('explanation');
      exp.innerHTML = `
        <div class="explanation-header" style="color:${isCorrect ? '#4caf50' : '#f44336'};">
          <span class="explanation-icon">ğŸ’¡</span>è§£èª¬
        </div>
        ${q.explanation}
      `;
      exp.style.borderLeftColor = isCorrect ? '#4caf50' : '#f44336';
      exp.style.display='block';
      requestAnimationFrame(()=> exp.style.opacity='1');

      $('next').disabled = false;
    };

    $('next').addEventListener('click', ()=>{
      if(current < quizData.length-1){ current++; renderQuestion(); }
      else{ showResult(); }
    });

    function showResult(){
      clearInterval(timer);
      const finalTime = $('timer').textContent;
      $('quiz-container').style.display = 'none';

      const total = quizData.length;
      const pct = (score/total)*100;
      let color = '#34c759', msg = 'ç´ æ™´ã‚‰ã—ã„æˆç¸¾ã§ã™ï¼ã“ã®èª¿å­ã§å­¦ç¿’ã‚’ç¶šã‘ã¾ã—ã‚‡ã†ã€‚';
      if(pct < 40){ color = '#ff3b30'; msg = 'ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼é–“é•ãˆãŸå•é¡Œã‚’ä¸­å¿ƒã«ã—ã£ã‹ã‚Šå¾©ç¿’ã—ã¾ã—ã‚‡ã†ã€‚'; }
      else if(pct < 80){ color = '#ff9500'; msg = 'ã‚ã¨ä¸€æ­©ï¼é–“é•ãˆãŸç®‡æ‰€ã‚’å¾©ç¿’ã™ã‚Œã°ã€ã•ã‚‰ã«å®ŸåŠ›ãŒã‚¢ãƒƒãƒ—ã—ã¾ã™ã€‚'; }
      
      let skullHTML = '';
      if(pct === 100){ 
        msg = 'å®Œç’§ã§ã™ï¼ç´ æ™´ã‚‰ã—ã„é›†ä¸­åŠ›ã¨çŸ¥è­˜ã§ã™ã€‚ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼';
        createConfetti(); // ç´™å¹é›ªã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
        skullHTML = `
          <div id="skull-celebration">
            ${createSkullSVG()}
            <div class="celebration-text">ğŸ‰ ãƒ‘ãƒ¼ãƒ•ã‚§ã‚¯ãƒˆï¼ ğŸ‰</div>
          </div>
        `;
      }

      // æˆç¸¾ã‚µãƒãƒªãƒ¼
      const summary = `
        <div class="result-card" id="summary-card">
          ${skullHTML}
          <div class="summary-grid">
            <div class="score-display">
              <div class="score-circle" style="--p:${pct.toFixed(1)}; --c:${color};">
                <span class="score-percentage">${Math.round(pct)}<small>%</small></span>
              </div>
            </div>
            <div class="stats-details">
              <div class="stat-item"><span class="stat-icon">âœ…</span><span class="stat-label">æ­£è§£æ•°</span><span class="stat-value">${score} / ${total}</span></div>
              <div class="stat-item"><span class="stat-icon">â±ï¸</span><span class="stat-label">æ‰€è¦æ™‚é–“</span><span class="stat-value">${finalTime}</span></div>
            </div>
          </div>
          <p class="feedback-message" style="color:${color};">${msg}</p>
        </div>
      `;

      // é–“é•ã„ä¸€è¦§
      const wrong = [];
      quizData.forEach((q, qi)=>{
        if(userAnswers[qi] === null) return;
        if(userAnswers[qi] !== q.answer) wrong.push(qi+1);
      });

      let html = `<h2>ã‚¯ã‚¤ã‚ºçµæœ</h2>${summary}`;
      if(wrong.length){
        html += `
          <div id="incorrect-summary">
            <h3>è¦å¾©ç¿’ã®å•é¡Œ</h3>
            ${wrong.map(n=>`<a href="#result-q-${n}">${n}</a>`).join('')}
          </div>
        `;
      }

      // å„å•ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼
      quizData.forEach((q, qi)=>{
        const ua = userAnswers[qi];
        const ok = (ua === q.answer);
        html += `
          <div class="result-card" id="result-q-${qi+1}">
            <h3>å•é¡Œ ${qi+1}</h3>
            <p class="result-status ${ok ? 'correct':'incorrect'}">${ok ? 'æ­£è§£':'ä¸æ­£è§£'}</p>
            <p><strong>è³ªå•:</strong> ${q.question}</p>
            <p><strong>ã‚ãªãŸã®å›ç­”:</strong> ${ua !== null ? q.options[ua] : 'æœªå›ç­”'}</p>
            <p><strong>æ­£è§£:</strong> ${q.options[q.answer]}</p>
            <p><strong>èª¬æ˜:</strong> ${q.explanation}</p>
          </div>
        `;
      });

      html += `<button class="nav-button" onclick="restartQuiz()">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã™ã‚‹</button>`;
      $('result-container').innerHTML = html;

      if(pct === 100){
        const a = $('attendance-link');
        a.style.display = 'block';
        a.innerHTML = `<p>ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼å…¨å•æ­£è§£ã§ã™ã€‚</p>
          <a href="https://forms.gle/Uun3fT1xUG7bybSB6" target="_blank" rel="noopener">å‡ºå¸­ç¢ºèªãƒ•ã‚©ãƒ¼ãƒ ã«å›ç­”ã™ã‚‹</a>`;
      }
    }

    window.restartQuiz = function(){
      $('quiz-container').style.display = 'block';
      $('result-container').innerHTML = '';
      $('attendance-link').style.display = 'none';
      initQuiz();
    };

    // èµ·å‹•
    initQuiz();
  </script>
</body>
</html>
