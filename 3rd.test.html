<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ç¬¬3å›ç¢ºèªãƒ†ã‚¹ãƒˆï¼ˆå¥åº·éšœå®³ï¼‘ï¼‰</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;
      line-height:1.6;color:#333;
      background:linear-gradient(135deg,#a8edea,#fed6e3);
      background-size:cover;background-repeat:no-repeat;background-attachment:fixed;
      padding:20px;margin:0;
      transition:background .3s ease,color .3s ease;
    }
    .container{max-width:800px;margin:0 auto;}
    h1,h2{font-family:'Noto Sans JP',sans-serif;font-weight:700;text-align:center;}
    .toolbar{display:flex;justify-content:flex-end;margin-bottom:12px;gap:10px;}
    .theme-toggle{
      background:linear-gradient(135deg,#111827,#1f2937);
      color:#f9fafb;border:1px solid rgba(255,255,255,0.12);
      border-radius:999px;padding:8px 14px;font-size:.95em;
      cursor:pointer;box-shadow:0 4px 10px rgba(0,0,0,0.25);
      transition:transform .2s ease,box-shadow .2s ease,background .3s ease;
    }
    .theme-toggle:hover{transform:translateY(-1px);box-shadow:0 8px 16px rgba(0,0,0,0.3);}
    .quiz-container,.result-card{
      background-color:rgba(255,255,255,0.2);
      backdrop-filter:blur(10px);
      border-radius:16px;padding:20px;margin-bottom:20px;
      border:1px solid rgba(255,255,255,0.3);
      box-shadow:0 8px 24px rgba(0,0,0,0.2);
    }
    #progress-container{width:100%;background-color:rgba(255,255,255,0.3);border-radius:10px;margin-bottom:5px;padding:4px;}
    #progress-bar{height:12px;width:0%;background:linear-gradient(135deg,#007aff,#5ac8fa);border-radius:6px;transition:width .4s ease-in-out;}
    #progress-info{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding:0 5px;font-weight:bold;font-size:.9em;color:#1d1d1f;}
    .question{font-size:1.3em;margin-bottom:20px;color:#1d1d1f;}
    .options{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;}
    .option{
      background-color:rgba(255,255,255,.7);border:none;border-radius:16px;padding:15px;
      font-size:1em;cursor:pointer;position:relative;overflow:hidden;text-align:center;
      transition:background .3s ease,transform .3s ease,box-shadow .3s ease;
      box-shadow:0 4px 8px rgba(0,0,0,.1);
    }
    .option:hover{background-color:#fff;box-shadow:0 8px 16px rgba(0,0,0,.2);transform:translateY(-2px);}
    .option.selected{color:#fff;}
    .option.disabled{pointer-events:none;}
    .option.correct{background:linear-gradient(135deg,#34c759,#a8e6cf);color:#fff;}
    .option.incorrect{background:linear-gradient(135deg,#ff3b30,#ff9a8b);color:#fff;}
    .explanation{
      margin-top:20px;font-size:1em;color:#333;background-color:rgba(255,255,255,.8);
      border-left:5px solid;border-radius:12px;padding:15px;
      box-shadow:0 4px 8px rgba(0,0,0,.1);display:none;opacity:0;transition:opacity .5s ease;
    }
    .explanation-header{display:flex;align-items:center;margin-bottom:10px;font-weight:bold;}
    .explanation-icon{font-size:1.5em;margin-right:10px;}
    .nav-button{
      background:linear-gradient(135deg,#007aff,#5ac8fa);color:#fff;border:none;border-radius:12px;
      padding:12px 24px;font-size:1em;cursor:pointer;width:100%;margin-top:20px;
      transition:background .3s ease,transform .2s ease,box-shadow .3s ease,opacity .3s ease;
      box-shadow:0 4px 8px rgba(0,0,0,.1);
    }
    .nav-button:hover{background:linear-gradient(135deg,#005bb5,#4aa0d3);box-shadow:0 8px 16px rgba(0,0,0,.2);}
    .nav-button:disabled{background:linear-gradient(135deg,#c7c7cc,#d1d1d6);opacity:.6;cursor:not-allowed;box-shadow:none;transform:none;}
    .nav-button:active{transform:scale(.98);}
    .result-card h3{font-size:1.2em;margin-bottom:10px;}
    .result-status{font-weight:bold;margin-bottom:10px;}
    .correct{color:#34c759;}
    .incorrect{color:#ff3b30;}
    #incorrect-summary{background-color:rgba(255,235,238,.8);border:1px solid #ff3b30;border-radius:12px;padding:15px;margin-bottom:20px;}
    #incorrect-summary h3{margin-top:0;}
    #incorrect-summary a{display:inline-block;margin:5px;padding:5px 10px;background-color:#ff3b30;color:#fff;text-decoration:none;border-radius:8px;transition:background-color .3s;}
    #incorrect-summary a:hover{background-color:#c50000;}
    #attendance-link{background-color:#34c759;color:#fff;padding:15px;border-radius:12px;margin-top:20px;text-align:center;display:none;}
    #attendance-link a{color:#fff;text-decoration:none;font-weight:bold;}

    /* ---- æˆç¸¾ã‚«ãƒ¼ãƒ‰ ---- */
    #summary-card{background:rgba(255,255,255,.3);border:1px solid rgba(255,255,255,.4);padding:25px;}
    .summary-grid{display:flex;align-items:center;justify-content:center;gap:30px;flex-wrap:wrap;}
    .score-display{display:grid;place-items:center;}
    @property --p{syntax:'<number>';inherits:true;initial-value:0;}
    .score-circle{
      --p:20;--b:20px;--c:#34c759;--w:180px;
      width:var(--w);aspect-ratio:1;position:relative;display:inline-grid;margin:5px;
      place-content:center;font-size:2.5em;font-weight:bold;animation:progress-load 1s .5s both;
    }
    .score-circle:before,.score-circle:after{content:"";position:absolute;border-radius:50%;}
    .score-circle:before{
      inset:0;
      background:
        radial-gradient(farthest-side,var(--c) 98%,#0000) top/var(--b) var(--b) no-repeat,
        conic-gradient(var(--c) calc(var(--p)*1%),#0000 0);
      -webkit-mask:radial-gradient(farthest-side,#0000 calc(99% - var(--b)),#000 calc(100% - var(--b)));
              mask:radial-gradient(farthest-side,#0000 calc(99% - var(--b)),#000 calc(100% - var(--b)));
    }
    .score-circle:after{inset:calc(50% - var(--b)/2);background:var(--c);transform:rotate(calc(var(--p)*3.6deg)) translateY(calc(50% - var(--w)/2));}
    @keyframes progress-load{from{--p:0;}}
    .score-percentage small{font-size:.5em;color:#555;}
    .stats-details{display:flex;flex-direction:column;gap:15px;}
    .stat-item{display:flex;align-items:center;background-color:rgba(255,255,255,.5);border-radius:12px;padding:10px 15px;}
    .stat-icon{font-size:1.5em;margin-right:12px;}
    .stat-label{font-size:.9em;color:#333;margin-right:auto;}
    .stat-value{font-size:1.2em;font-weight:bold;color:#000;}
    .feedback-message{text-align:center;margin-top:20px;font-size:1.1em;font-weight:500;padding:10px;border-radius:10px;background-color:rgba(255,255,255,.3);}

    /* ---- ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒ ---- */
    .dark-theme{
      color:#e5e7eb;
      background:radial-gradient(ellipse at top,#1f2937 0%,#0b1220 55%,#050912 100%);
    }
    .dark-theme h1,.dark-theme h2{color:#f3f4f6;}
    .dark-theme .quiz-container,
    .dark-theme .result-card,
    .dark-theme #summary-card{background-color:rgba(17,24,39,0.55);border-color:rgba(255,255,255,0.08);box-shadow:0 10px 30px rgba(0,0,0,0.45);}
    .dark-theme #progress-container{background-color:rgba(255,255,255,0.08);}
    .dark-theme #progress-info{color:#e5e7eb;}
    .dark-theme .question{color:#f3f4f6;}
    .dark-theme .option{background-color:rgba(255,255,255,0.08);color:#e5e7eb;box-shadow:0 6px 14px rgba(0,0,0,0.25);}
    .dark-theme .option:hover{background-color:rgba(255,255,255,0.16);}
    .dark-theme .explanation{background-color:rgba(255,255,255,0.08);color:#e5e7eb;}
    .dark-theme .nav-button{background:linear-gradient(135deg,#2563eb,#1d4ed8);box-shadow:0 8px 18px rgba(0,0,0,0.35);}
    .dark-theme .nav-button:disabled{background:linear-gradient(135deg,#4b5563,#6b7280);}
    .dark-theme #incorrect-summary{background-color:rgba(255,82,82,0.08);border-color:#ff6b6b;}
    .dark-theme #incorrect-summary a{background-color:#ef4444;}
    .dark-theme #attendance-link{background-color:#22c55e;}
    .dark-theme .theme-toggle{background:linear-gradient(135deg,#fcd34d,#f59e0b);color:#111827;border-color:rgba(0,0,0,0.2);}
  </style>
</head>
<body>
  <div class="container">
    <div class="toolbar">
      <button id="theme-toggle" class="theme-toggle">ğŸŒ™ ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰</button>
    </div>
    <h1>ç¬¬3å›ç¢ºèªãƒ†ã‚¹ãƒˆï¼ˆå¥åº·éšœå®³ï¼‘ï¼‰</h1>

    <div id="quiz-container" class="quiz-container">
      <div id="progress-container"><div id="progress-bar"></div></div>
      <div id="progress-info">
        <div id="progress-text"></div>
        <div id="timer">00:00</div>
      </div>

      <div id="quiz-content">
        <div id="question" class="question"></div>
        <div id="options" class="options"></div>
        <div id="explanation" class="explanation"></div>
      </div>
      <button id="next" class="nav-button" disabled>æ¬¡ã®å•é¡Œ</button>
    </div>

    <div id="result-container"></div>
    <div id="attendance-link"></div>
  </div>

  <script>
    // â€”â€” ã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿ï¼ˆç„¡åŠ¹ã‚¿ã‚°ã‚’é™¤å»ã—ã€Q1/10/12ã‚’è»½å¾®ä¿®æ­£ï¼‰â€”â€”
    const quizData = [
      {
        "question":"ç‚ç—‡ã®5å¾´å€™ã®ã†ã¡ã€ã€Œç™ºèµ¤ã€ã¨ã€Œç†±æ„Ÿï¼ˆå±€æ‰€ã®æ¸©æ„Ÿï¼‰ã€ã®ä¸»ãªåŸå› ã¨ãªã‚‹ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        "options":["è¡€ç®¡é€éæ€§ã®äº¢é€²","ãƒ–ãƒ©ã‚¸ã‚­ãƒ‹ãƒ³ã«ã‚ˆã‚‹ç–¼ç—›åˆºæ¿€","ç™½è¡€çƒã®çµ„ç¹”ã¸ã®éŠèµ°","å±€æ‰€ã®è¡€ç®¡æ‹¡å¼µã¨è¡€æµå¢—å¤§"],
        "answer":3,
        "explanation":"ç™ºèµ¤ã¨ç†±æ„Ÿã¯ã€å±€æ‰€ã®è¡€ç®¡æ‹¡å¼µã«ã‚ˆã‚Šæ¸©ã‹ã„è¡€æ¶²ã®æµå…¥ãŒå¢—ãˆã‚‹ã“ã¨ã§ç”Ÿã˜ã¾ã™ã€‚è¡€ç®¡é€éæ€§äº¢é€²ã¯ä¸»ã«è…«è„¹ã®åŸå› ã¨ãªã‚Šã¾ã™ã€‚"
      },
      {
        "question":"æ€¥æ€§ç‚ç—‡ã®åˆæœŸæ®µéšã§ã€ç‚ç—‡éƒ¨ä½ã«æœ€åˆã«é›†çµã—ã€è²ªé£Ÿèƒ½ã¨æ®ºèŒä½œç”¨ã‚’æŒã¤ä¸»è¦ãªç™½è¡€çƒã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        "options":["å¥½ä¸­çƒ","ãƒªãƒ³ãƒ‘çƒ","å˜çƒï¼ˆãƒã‚¯ãƒ­ãƒ•ã‚¡ãƒ¼ã‚¸ï¼‰","å½¢è³ªç´°èƒ"],
        "answer":0,
        "explanation":"å¥½ä¸­çƒã¯æ€¥æ€§ç‚ç—‡ã®åˆæœŸã«æœ€åˆã«å‹•å“¡ã•ã‚Œã€è²ªé£Ÿãƒ»æ®ºèŒã§ä¸­å¿ƒçš„ã«åƒãã¾ã™ã€‚ãƒªãƒ³ãƒ‘çƒã‚„ãƒã‚¯ãƒ­ãƒ•ã‚¡ãƒ¼ã‚¸ã¯æ…¢æ€§ç‚ç—‡ã§ä¸»ä½“ã¨ãªã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚"
      },
      {
        "question":"ç™½è¡€çƒãŒç‚ç—‡éƒ¨ä½ã«ç§»å‹•ã™ã‚‹éš›ã€è¡€ç®¡å†…çš®ç´°èƒã®è¡¨é¢ã‚’è»¢ãŒã‚‹ã€Œãƒ­ãƒ¼ãƒªãƒ³ã‚°ã€ã«ä¸»ã«é–¢ä¸ã™ã‚‹æ¥ç€åˆ†å­ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        "options":["ã‚¤ãƒ³ãƒ†ã‚°ãƒªãƒ³","ã‚±ãƒ¢ã‚«ã‚¤ãƒ³","ã‚»ãƒ¬ã‚¯ãƒãƒ³","ãƒ’ã‚¹ã‚¿ãƒŸãƒ³"],
        "answer":2,
        "explanation":"ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã¯å†…çš®ä¸Šã®ã‚»ãƒ¬ã‚¯ãƒãƒ³ã¨ç™½è¡€çƒç³–é–ã®å¼±ã„çµåˆã§èµ·ã“ã‚Šã¾ã™ã€‚ç¶šã„ã¦ã‚±ãƒ¢ã‚«ã‚¤ãƒ³ã«ã‚ˆã‚Šç™½è¡€çƒã‚¤ãƒ³ãƒ†ã‚°ãƒªãƒ³ãŒæ´»æ€§åŒ–ã—ã€å¼·å›ºãªæ¥ç€ã«ç§»è¡Œã—ã¾ã™ã€‚"
      },
      {
        "question":"è‚¥æº€ç´°èƒï¼ˆãƒã‚¹ãƒˆç´°èƒï¼‰ã‹ã‚‰æ”¾å‡ºã•ã‚Œã€è¡€ç®¡é€éæ€§ã®äº¢é€²ã‚„è¡€ç®¡æ‹¡å¼µã‚’å¼•ãèµ·ã“ã™ã€Iå‹ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ã‚„æ€¥æ€§ç‚ç—‡ã®ä¸»è¦ãªåŒ–å­¦ä¼é”ç‰©è³ªã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        "options":["ãƒ–ãƒ©ã‚¸ã‚­ãƒ‹ãƒ³","ãƒ’ã‚¹ã‚¿ãƒŸãƒ³","ãƒ—ãƒ­ã‚¹ã‚¿ã‚°ãƒ©ãƒ³ã‚¸ãƒ³","ãƒ•ã‚£ãƒ–ãƒªãƒãƒ¼ã‚²ãƒ³"],
        "answer":1,
        "explanation":"ãƒ’ã‚¹ã‚¿ãƒŸãƒ³ã¯è‚¥æº€ç´°èƒã®é¡†ç²’ã«è±Šå¯Œã§ã€è¡€ç®¡æ‹¡å¼µã¨é€éæ€§äº¢é€²ã‚’å¼·åŠ›ã«èª˜å°ã—ã¾ã™ã€‚"
      },
      {
        "question":"æ€¥æ€§ç‚ç—‡ãŒçµ‚æ¯ã›ãšã€ãƒã‚¯ãƒ­ãƒ•ã‚¡ãƒ¼ã‚¸ã‚„ãƒªãƒ³ãƒ‘çƒã®æµ¸æ½¤ãŒä¸»ä½“ã¨ãªã‚Šã€çµ„ç¹”ã®æ§‹é€ å¤‰åŒ–ã¨æ©Ÿèƒ½æ¬ æã«è‡³ã‚‹ç‚ç—‡ã®ç—…æ…‹ã‚’ä½•ã¨å‘¼ã³ã¾ã™ã‹ï¼Ÿ",
        "options":["æ€¥æ€§ç‚ç—‡","æ…¢æ€§ç‚ç—‡","è‚‰èŠ½å½¢æˆ","æ»²å‡º"],
        "answer":1,
        "explanation":"æ…¢æ€§ç‚ç—‡ã§ã¯ãƒã‚¯ãƒ­ãƒ•ã‚¡ãƒ¼ã‚¸ã‚„ãƒªãƒ³ãƒ‘çƒãŒä¸»ä½“ã¨ãªã‚Šã€çµ„ç¹”ç ´å£Šã¨ä¿®å¾©ãŒä½µå­˜ã—ã¾ã™ã€‚"
      },
      {
        "question":"ä½“å†…ã§ç‚ç—‡ãŒèµ·ããŸéš›ã€è¡€æ¶²æ¤œæŸ»ã§æ¸¬å®šã•ã‚Œã‚‹ãƒãƒ¼ã‚«ãƒ¼ã®ã†ã¡ã€ç‚ç—‡åˆºæ¿€ã‹ã‚‰æ•°æ™‚é–“ã€œ1æ—¥ç¨‹åº¦ã§ä¸Šæ˜‡ã—ã€æ€¥æ€§ç‚ç—‡ã®è‰¯ã„æŒ‡æ¨™ã¨ã•ã‚Œã‚‹ã‚¿ãƒ³ãƒ‘ã‚¯è³ªã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        "options":["ã‚µã‚¤ãƒˆã‚«ã‚¤ãƒ³ (IL-6ãªã©)","CRP (Cåå¿œæ€§ã‚¿ãƒ³ãƒ‘ã‚¯)","èµ¤æ²ˆ (èµ¤è¡€çƒæ²ˆé™é€Ÿåº¦)","å…ç–«ã‚°ãƒ­ãƒ–ãƒªãƒ³"],
        "answer":1,
        "explanation":"CRPã¯IL-6åˆºæ¿€ã§è‚è‡“ã‹ã‚‰ç”£ç”Ÿã•ã‚Œã€æ•°æ™‚é–“ã€œ1æ—¥ã§ä¸Šæ˜‡ã™ã‚‹æ€¥æ€§æœŸã‚¿ãƒ³ãƒ‘ã‚¯ã§ã€è‡¨åºŠã§åºƒãç”¨ã„ã‚‰ã‚Œã¾ã™ã€‚"
      },
      {
        "question":"èŠ±ç²‰ç—‡ã€æ°—ç®¡æ”¯å–˜æ¯ã€ã‚¢ãƒŠãƒ•ã‚£ãƒ©ã‚­ã‚·ãƒ¼ã‚·ãƒ§ãƒƒã‚¯ã«å…±é€šã™ã‚‹ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ã®åˆ†é¡ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        "options":["Iå‹ï¼ˆå³æ™‚å‹ï¼‰","IIå‹ï¼ˆç´°èƒéšœå®³å‹ï¼‰","IIIå‹ï¼ˆå…ç–«è¤‡åˆä½“å‹ï¼‰","IVå‹ï¼ˆé…å»¶å‹ï¼‰"],
        "answer":0,
        "explanation":"Iå‹ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ã¯IgEã¨è‚¥æº€ç´°èƒãŒé–¢ä¸ã—ã€å³æ™‚ã«åå¿œãŒå‡ºç¾ã—ã¾ã™ã€‚"
      },
      {
        "question":"Iå‹ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ã®ç™ºç”Ÿæ©Ÿåºã«ãŠã„ã¦ã€ãƒ’ã‚¹ã‚¿ãƒŸãƒ³ã‚’æ”¾å‡ºã™ã‚‹ã€Œè„±é¡†ç²’ã€ã‚’å¼•ãèµ·ã“ã™ç›´æ¥ã®ãƒˆãƒªã‚¬ãƒ¼ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        "options":["è‚¥æº€ç´°èƒè¡¨é¢ã®IgEã«ã‚¢ãƒ¬ãƒ«ã‚²ãƒ³ãŒçµåˆã™ã‚‹","Tç´°èƒãŒã‚¢ãƒ¬ãƒ«ã‚²ãƒ³ã‚’èªè­˜ã™ã‚‹","ã‚¢ãƒ¬ãƒ«ã‚²ãƒ³ã«IgGæŠ—ä½“ãŒçµåˆã™ã‚‹","è£œä½“ãŒæ´»æ€§åŒ–ã™ã‚‹"],
        "answer":0,
        "explanation":"ã‚¢ãƒ¬ãƒ«ã‚²ãƒ³ãŒè‚¥æº€ç´°èƒè¡¨é¢ã®IgEã‚’æ¶æ©‹ã™ã‚‹ã¨è„±é¡†ç²’ãŒèµ·ã“ã‚Šã€ãƒ’ã‚¹ã‚¿ãƒŸãƒ³ãªã©ãŒæ”¾å‡ºã•ã‚Œã¾ã™ã€‚"
      },
      {
        "question":"è¡€æ¶²å‹ä¸é©åˆè¼¸è¡€ã«ã‚ˆã£ã¦å¼•ãèµ·ã“ã•ã‚Œã‚‹èµ¤è¡€çƒã®ç ´å£Šï¼ˆæº¶è¡€ï¼‰ã¯ã€ã©ã®ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼å‹ã«åˆ†é¡ã•ã‚Œã¾ã™ã‹ï¼Ÿ",
        "options":["Iå‹ï¼ˆå³æ™‚å‹ï¼‰","IIå‹ï¼ˆç´°èƒéšœå®³å‹ï¼‰","IIIå‹ï¼ˆå…ç–«è¤‡åˆä½“å‹ï¼‰","IVå‹ï¼ˆé…å»¶å‹ï¼‰"],
        "answer":1,
        "explanation":"IIå‹ã¯ç´°èƒè¡¨é¢æŠ—åŸã«å¯¾ã™ã‚‹IgG/IgMãŒä»‹åœ¨ã—ã€è£œä½“æ´»æ€§åŒ–ãªã©ã§æ¨™çš„ç´°èƒãŒç ´å£Šã•ã‚Œã¾ã™ã€‚"
      },
      {
        "question":"æŠ—åŸã¨æŠ—ä½“ï¼ˆä¸»ã«IgGï¼‰ãŒçµåˆã—ã¦å½¢æˆã•ã‚ŒãŸå…ç–«è¤‡åˆä½“ãŒã€è…ç³¸çƒä½“ã‚„è¡€ç®¡å£ã«æ²ˆç€ã—ã¦ç‚ç—‡ã‚’å¼•ãèµ·ã“ã™ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼å‹ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        "options":["Iå‹ï¼ˆå³æ™‚å‹ï¼‰","IIå‹ï¼ˆç´°èƒéšœå®³å‹ï¼‰","IIIå‹ï¼ˆå…ç–«è¤‡åˆä½“å‹ï¼‰","IVå‹ï¼ˆé…å»¶å‹ï¼‰"],
        "answer":2,
        "explanation":"IIIå‹ã¯å…ç–«è¤‡åˆä½“ã®æ²ˆç€ã‚’å¥‘æ©Ÿã«è£œä½“ãƒ»å¥½ä¸­çƒãŒæ´»æ€§åŒ–ã—ã¦çµ„ç¹”éšœå®³ãŒç”Ÿã˜ã¾ã™ã€‚RAã¯â…¢å‹è¦ç´ ã«åŠ ãˆç´°èƒæ€§å…ç–«ã‚‚é–¢ä¸ã™ã‚‹å¤šå› å­ç–¾æ‚£ã§ã‚ã‚‹ç‚¹ã«ç•™æ„ã—ã¾ã™ã€‚"
      },
      {
        "question":"é‡‘å±ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ã«ã‚ˆã‚‹æ¥è§¦æ€§çš®è†šç‚ã‚„ãƒ„ãƒ™ãƒ«ã‚¯ãƒªãƒ³åå¿œã®ã‚ˆã†ã«ã€Tç´°èƒãŒé–¢ä¸ã—ã€åå¿œç™ºç¾ã¾ã§ã«48æ™‚é–“ç¨‹åº¦ã‚’è¦ã™ã‚‹ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼å‹ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        "options":["Iå‹ï¼ˆå³æ™‚å‹ï¼‰","IIå‹ï¼ˆç´°èƒéšœå®³å‹ï¼‰","IIIå‹ï¼ˆå…ç–«è¤‡åˆä½“å‹ï¼‰","IVå‹ï¼ˆé…å»¶å‹ï¼‰"],
        "answer":3,
        "explanation":"IVå‹ã¯æ„Ÿä½œTç´°èƒãŒã‚µã‚¤ãƒˆã‚«ã‚¤ãƒ³ã‚’æ”¾å‡ºã—ã¦æƒ¹èµ·ã•ã‚Œã‚‹é…å»¶å‹éæ•åå¿œã§ã™ã€‚"
      },
      {
        "question":"ãƒã‚»ãƒ‰ã‚¦ç—…ã®åŸå› ã¨ãªã‚‹ã€TSHå—å®¹ä½“ã«çµåˆã—ã¦ç”²çŠ¶è…ºã‚’æŒç¶šåˆºæ¿€ã™ã‚‹è‡ªå·±æŠ—ä½“ã«ã‚ˆã‚‹ç—…æ…‹ã¯ã©ã®åˆ†é¡ã§ã™ã‹ï¼Ÿ",
        "options":["IIå‹ï¼ˆç´°èƒéšœå®³å‹ï¼‰","IIIå‹ï¼ˆå…ç–«è¤‡åˆä½“å‹ï¼‰","IVå‹ï¼ˆé…å»¶å‹ï¼‰","Vå‹ï¼ˆåˆºæ¿€å‹ï¼‰"],
        "answer":3,
        "explanation":"å¤šãã®è³‡æ–™ã§â€œVå‹ï¼ˆåˆºæ¿€å‹ï¼‰â€ã¨ã—ã¦èª¬æ˜ã•ã‚Œã¾ã™ãŒã€æ•™ç§‘æ›¸ã«ã‚ˆã£ã¦ã¯â€œIIå‹ï¼ˆæŠ—ä½“ä»‹åœ¨ãƒ»éç´°èƒéšœå®³å‹ï¼‰â€ã«å«ã‚ã‚‹æµå„€ã‚‚ã‚ã‚Šã¾ã™ã€‚æˆæ¥­ã§æµå„€ã‚’æ˜ç¤ºã—ã¦ãã ã•ã„ã€‚"
      },
      {
        "question":"å…ç–«ã‚·ã‚¹ãƒ†ãƒ ãŒè‡ªå·±ã®ç”Ÿä½“æˆåˆ†ã‚’éè‡ªå·±ã¨èª¤èªã—ã€è‡ªèº«ã‚’æ”»æ’ƒã—ã¦ã—ã¾ã†ç–¾æ‚£ç¾¤ã®ç·ç§°ã¯ä½•ã§ã™ã‹ï¼Ÿ",
        "options":["ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼","å…ç–«ä¸å…¨ç—‡","è‡ªå·±å…ç–«ç–¾æ‚£","æ—¥å’Œè¦‹æ„ŸæŸ“"],
        "answer":2,
        "explanation":"è‡ªå·±æŠ—åŸã«å¯¾ã™ã‚‹ç•°å¸¸ãªå…ç–«å¿œç­”ã«ã‚ˆã‚Šã€è‡ªå·±çµ„ç¹”ãŒå‚·å®³ã•ã‚Œã‚‹ç–¾æ‚£ç¾¤ã‚’è‡ªå·±å…ç–«ç–¾æ‚£ã¨å‘¼ã³ã¾ã™ã€‚"
      },
      {
        "question":"é–¢ç¯€ãƒªã‚¦ãƒãƒ(RA)ã‚„å…¨èº«æ€§ã‚¨ãƒªãƒ†ãƒãƒˆãƒ¼ãƒ‡ã‚¹(SLE)ã®ã‚ˆã†ã«ã€å…¨èº«ã®è¡€ç®¡ãƒ»çµåˆçµ„ç¹”ãƒ»é–¢ç¯€ãŒå‚·å®³ã•ã‚Œã‚‹è‡ªå·±å…ç–«ç–¾æ‚£ç¾¤ã‚’ä½•ã¨å‘¼ã³ã¾ã™ã‹ï¼Ÿ",
        "options":["è† åŸç—…","è‡“å™¨ç‰¹ç•°çš„è‡ªå·±å…ç–«ç–¾æ‚£","å…ç–«ä¸å…¨ç—‡","ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼æ€§ç–¾æ‚£"],
        "answer":0,
        "explanation":"è† åŸç—…ã¯çµåˆçµ„ç¹”ã‚„è¡€ç®¡ã‚’ä¸»åº§ã¨ã™ã‚‹å…¨èº«æ€§è‡ªå·±å…ç–«ç–¾æ‚£ç¾¤ã®ç·ç§°ã§ã™ã€‚"
      },
      {
        "question":"æ¶™è…ºã‚„å”¾æ¶²è…ºãŒè‡ªå·±å…ç–«ã«ã‚ˆã‚Šç ´å£Šã•ã‚Œã€ä¹¾ç‡¥ç—‡çŠ¶ã‚’å‘ˆã™ã‚‹è† åŸç—…ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        "options":["å…¨èº«æ€§ã‚¨ãƒªãƒ†ãƒãƒˆãƒ¼ãƒ‡ã‚¹ (SLE)","é€²è¡Œæ€§å…¨èº«æ€§ç¡¬åŒ–ç—‡ (PSS)","é–¢ç¯€ãƒªã‚¦ãƒãƒ (RA)","ã‚·ã‚§ãƒ¼ã‚°ãƒ¬ãƒ³ç—‡å€™ç¾¤"],
        "answer":3,
        "explanation":"ã‚·ã‚§ãƒ¼ã‚°ãƒ¬ãƒ³ç—‡å€™ç¾¤ã§ã¯æ¶™è…ºãƒ»å”¾æ¶²è…ºã®è‡ªå·±å…ç–«æ€§ç‚ç—‡ã«ã‚ˆã‚Šãƒ‰ãƒ©ã‚¤ã‚¢ã‚¤ãƒ»ãƒ‰ãƒ©ã‚¤ãƒã‚¦ã‚¹ãŒç”Ÿã˜ã¾ã™ã€‚"
      },
      {
        "question":"è‡“å™¨ç§»æ¤ã«ãŠã„ã¦ã€ç§»æ¤ã‚’å—ã‘ãŸæ‚£è€…ã®å…ç–«ç³»ãŒç§»æ¤è‡“å™¨ã‚’éè‡ªå·±ã¨ã—ã¦æ”»æ’ƒã™ã‚‹åå¿œã¯ä½•ã§ã™ã‹ï¼Ÿ",
        "options":["ç§»æ¤ç‰‡å¯¾å®¿ä¸»ç—… (GVHD)","æ‹’çµ¶åå¿œ","ã‚¢ãƒŠãƒ•ã‚£ãƒ©ã‚­ã‚·ãƒ¼ã‚·ãƒ§ãƒƒã‚¯","è‡ªå·±å…ç–«"],
        "answer":1,
        "explanation":"æ‹’çµ¶åå¿œã¯ãƒ¬ã‚·ãƒ”ã‚¨ãƒ³ãƒˆã®å…ç–«ç³»ãŒãƒ‰ãƒŠãƒ¼è‡“å™¨ã‚’æ”»æ’ƒã™ã‚‹ç¾è±¡ã§ã™ã€‚"
      },
      {
        "question":"éª¨é«„ç§»æ¤ãªã©ã§ã€ç§»æ¤ç‰‡ã«å«ã¾ã‚Œã‚‹ãƒ‰ãƒŠãƒ¼ã®ãƒªãƒ³ãƒ‘çƒãŒå®¿ä¸»ã®çµ„ç¹”ã‚’æ”»æ’ƒã™ã‚‹é‡ç¯¤ãªåˆä½µç—‡ã¯ä½•ã§ã™ã‹ï¼Ÿ",
        "options":["ç§»æ¤ç‰‡å¯¾å®¿ä¸»ç—… (GVHD)","æ‹’çµ¶åå¿œ","IIå‹ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼","æ—¥å’Œè¦‹æ„ŸæŸ“"],
        "answer":0,
        "explanation":"GVHDã¯ãƒ‰ãƒŠãƒ¼ãƒªãƒ³ãƒ‘çƒãŒå®¿ä¸»çµ„ç¹”ã‚’éè‡ªå·±ã¨èªè­˜ã—ã¦æ”»æ’ƒã™ã‚‹ç¾è±¡ã§ã™ã€‚"
      },
      {
        "question":"ç§»æ¤æ™‚ã®æ‹’çµ¶åå¿œã‚’æŠ‘ãˆã‚‹ãŸã‚ã«é©åˆæ€§ãŒé‡è¦ã¨ãªã‚‹ã€å€‹ä½“å·®ã®å¤§ãã„ç´°èƒè¡¨é¢ã®â€œè‡ªåˆ†ã®ã—ã‚‹ã—â€ã‚¿ãƒ³ãƒ‘ã‚¯è³ªè¤‡åˆä½“ã¯ä½•ã§ã™ã‹ï¼Ÿ",
        "options":["å…ç–«ã‚°ãƒ­ãƒ–ãƒªãƒ³","MHC (ä¸»è¦çµ„ç¹”é©åˆéºä¼å­è¤‡åˆä½“)","ã‚µã‚¤ãƒˆã‚«ã‚¤ãƒ³","ã‚±ãƒ¢ã‚«ã‚¤ãƒ³"],
        "answer":1,
        "explanation":"MHCï¼ˆãƒ’ãƒˆã§ã¯HLAï¼‰ã¯è‡ªå·±èªè­˜ã«é–¢ä¸ã—ã€ç§»æ¤é©åˆæ€§ã®åˆ¤å®šã«ä¸å¯æ¬ ã§ã™ã€‚"
      },
      {
        "question":"å¾Œå¤©æ€§å…ç–«ä¸å…¨ç—‡å€™ç¾¤ï¼ˆAIDSï¼‰ã®åŸå› ã§ã‚ã‚‹HIVãŒä¸»ã«æ„ŸæŸ“ãƒ»ç ´å£Šã™ã‚‹ç´°èƒã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        "options":["ãƒ˜ãƒ«ãƒ‘ãƒ¼Tç´°èƒ","Bç´°èƒ","å¥½ä¸­çƒ","NKç´°èƒ"],
        "answer":0,
        "explanation":"HIVã¯CD4é™½æ€§ãƒ˜ãƒ«ãƒ‘ãƒ¼Tç´°èƒã«æ„ŸæŸ“ã—ã€å…ç–«ã®å¸ä»¤å¡”æ©Ÿèƒ½ã‚’éšœå®³ã—ã¾ã™ã€‚"
      },
      {
        "question":"æ–°ç”Ÿå…ãŒç”Ÿå¾Œæ•°ãƒ¶æœˆé–“ã€æ¯ä½“ã‹ã‚‰èƒç›¤çµŒç”±ã§å—ã‘å–ã£ãŸæŠ—ä½“ã«ã‚ˆã‚Šå®ˆã‚‰ã‚Œã‚‹å—å‹•å…ç–«ã«é–¢ä¸ã™ã‚‹æŠ—ä½“ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        "options":["IgA","IgE","IgG","IgM"],
        "answer":2,
        "explanation":"èƒç›¤ã‚’é€šéã§ãã‚‹ä¸»è¦ãªå…ç–«ã‚°ãƒ­ãƒ–ãƒªãƒ³ã¯IgGã§ã™ã€‚"
      }
    ];

    // â€”â€” ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ â€”â€” 
    const $ = (id) => document.getElementById(id);
    function shuffle(array){
      for(let i=array.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [array[i],array[j]] = [array[j],array[i]];
      }
      return array;
    }

    // â€”â€” ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆ â€”â€” 
    const themeToggle = $('theme-toggle');
    function applyTheme(mode){
      const isDark = (mode === 'dark');
      document.body.classList.toggle('dark-theme', isDark);
      if(themeToggle){
        themeToggle.textContent = isDark ? 'â˜€ï¸ ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰' : 'ğŸŒ™ ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰';
      }
      localStorage.setItem('quiz-theme', isDark ? 'dark' : 'light');
    }
    function initTheme(){
      const saved = localStorage.getItem('quiz-theme');
      applyTheme(saved === 'dark' ? 'dark' : 'light');
      if(themeToggle){
        themeToggle.addEventListener('click', ()=>{
          const next = document.body.classList.contains('dark-theme') ? 'light' : 'dark';
          applyTheme(next);
        });
      }
    }

    // â€”â€” çŠ¶æ…‹ â€”â€” 
    let current = 0, score = 0, userAnswers = [];
    let order = [];        // å…¨è¨­å•ã®ä¸¦ã³
    let optionOrder = [];  // å„è¨­å•ã”ã¨ã®é¸æŠè‚¢ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä¸¦ã³
    let timer = null, seconds = 0;

    function startTimer(){
      if(timer) clearInterval(timer);
      seconds = 0; $('timer').textContent = '00:00';
      timer = setInterval(()=>{
        seconds++;
        const m = String(Math.floor(seconds/60)).padStart(2,'0');
        const s = String(seconds%60).padStart(2,'0');
        $('timer').textContent = `${m}:${s}`;
      },1000);
    }

    function initQuiz(){
      // è¨­å•ã®é †ç•ªã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«
      order = shuffle([...Array(quizData.length).keys()]);
      // å„è¨­å•ã®é¸æŠè‚¢ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«
      optionOrder = order.map(qi => shuffle([0,1,2,3]));
      userAnswers = Array(quizData.length).fill(null);
      current = 0; score = 0;
      startTimer();
      renderQuestion();
    }

    function renderQuestion(){
      const qIndex = order[current];
      const q = quizData[qIndex];

      // é€²æ—
      const prog = ((current+1)/quizData.length)*100;
      $('progress-bar').style.width = `${prog}%`;
      $('progress-text').textContent = `${current+1} / ${quizData.length} å•`;

      // æœ¬æ–‡
      $('question').textContent = q.question;

      // é¸æŠè‚¢ï¼ˆindexã§å®‰å…¨ã«ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼‰
      const idxOrder = optionOrder[current];
      $('options').innerHTML = idxOrder.map((optIdx,i)=>(
        `<button class="option" data-opt="${optIdx}" onclick="selectOption(${optIdx}, this)">${q.options[optIdx]}</button>`
      )).join('');

      // è§£èª¬ãƒªã‚»ãƒƒãƒˆ
      const exp = $('explanation');
      exp.style.display='none'; exp.style.opacity='0'; exp.innerHTML='';
      $('next').disabled = true;
    }

    window.selectOption = function(originalOptionIndex, el){
      // å…¨ã¦ç„¡åŠ¹åŒ–
      document.querySelectorAll('.option').forEach(o=>o.classList.add('disabled'));
      el.classList.add('selected');

      const qIndex = order[current];
      const q = quizData[qIndex];
      const isCorrect = (originalOptionIndex === q.answer);
      userAnswers[qIndex] = originalOptionIndex;
      if(isCorrect){ el.classList.add('correct'); score++; }
      else{
        el.classList.add('incorrect');
        // æ­£è§£ã«è‰²
        document.querySelectorAll('.option').forEach(o=>{
          const idx = Number(o.getAttribute('data-opt'));
          if(idx === q.answer){ o.classList.add('correct'); }
        });
      }

      const exp = $('explanation');
      exp.innerHTML = `
        <div class="explanation-header" style="color:${isCorrect ? '#4caf50' : '#f44336'};">
          <span class="explanation-icon">ğŸ’¡</span>è§£èª¬
        </div>
        ${q.explanation}
      `;
      exp.style.borderLeftColor = isCorrect ? '#4caf50' : '#f44336';
      exp.style.display='block';
      requestAnimationFrame(()=> exp.style.opacity='1');

      $('next').disabled = false;
    };

    $('next').addEventListener('click', ()=>{
      if(current < quizData.length-1){ current++; renderQuestion(); }
      else{ showResult(); }
    });

    function showResult(){
      clearInterval(timer);
      const finalTime = $('timer').textContent;
      $('quiz-container').style.display = 'none';

      const total = quizData.length;
      const pct = (score/total)*100;
      let color = '#34c759', msg = 'ç´ æ™´ã‚‰ã—ã„æˆç¸¾ã§ã™ï¼ã“ã®èª¿å­ã§å­¦ç¿’ã‚’ç¶šã‘ã¾ã—ã‚‡ã†ã€‚';
      if(pct < 40){ color = '#ff3b30'; msg = 'ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼é–“é•ãˆãŸå•é¡Œã‚’ä¸­å¿ƒã«ã—ã£ã‹ã‚Šå¾©ç¿’ã—ã¾ã—ã‚‡ã†ã€‚'; }
      else if(pct < 80){ color = '#ff9500'; msg = 'ã‚ã¨ä¸€æ­©ï¼é–“é•ãˆãŸç®‡æ‰€ã‚’å¾©ç¿’ã™ã‚Œã°ã€ã•ã‚‰ã«å®ŸåŠ›ãŒã‚¢ãƒƒãƒ—ã—ã¾ã™ã€‚'; }
      if(pct === 100){ msg = 'å®Œç’§ã§ã™ï¼ç´ æ™´ã‚‰ã—ã„é›†ä¸­åŠ›ã¨çŸ¥è­˜ã§ã™ã€‚ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼'; }

      // æˆç¸¾ã‚µãƒãƒªãƒ¼
      const summary = `
        <div class="result-card" id="summary-card">
          <div class="summary-grid">
            <div class="score-display">
              <div class="score-circle" style="--p:${pct.toFixed(1)}; --c:${color};">
                <span class="score-percentage">${Math.round(pct)}<small>%</small></span>
              </div>
            </div>
            <div class="stats-details">
              <div class="stat-item"><span class="stat-icon">âœ…</span><span class="stat-label">æ­£è§£æ•°</span><span class="stat-value">${score} / ${total}</span></div>
              <div class="stat-item"><span class="stat-icon">â±ï¸</span><span class="stat-label">æ‰€è¦æ™‚é–“</span><span class="stat-value">${finalTime}</span></div>
            </div>
          </div>
          <p class="feedback-message" style="color:${color};">${msg}</p>
        </div>
      `;

      // é–“é•ã„ä¸€è¦§
      const wrong = [];
      quizData.forEach((q, qi)=>{
        if(userAnswers[qi] === null) return;
        if(userAnswers[qi] !== q.answer) wrong.push(qi+1);
      });

      let html = `<h2>ã‚¯ã‚¤ã‚ºçµæœ</h2>${summary}`;
      if(wrong.length){
        html += `
          <div id="incorrect-summary">
            <h3>è¦å¾©ç¿’ã®å•é¡Œ</h3>
            ${wrong.map(n=>`<a href="#result-q-${n}">${n}</a>`).join('')}
          </div>
        `;
      }

      // å„å•ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼
      quizData.forEach((q, qi)=>{
        const ua = userAnswers[qi];
        const ok = (ua === q.answer);
        html += `
          <div class="result-card" id="result-q-${qi+1}">
            <h3>å•é¡Œ ${qi+1}</h3>
            <p class="result-status ${ok ? 'correct':'incorrect'}">${ok ? 'æ­£è§£':'ä¸æ­£è§£'}</p>
            <p><strong>è³ªå•:</strong> ${q.question}</p>
            <p><strong>ã‚ãªãŸã®å›ç­”:</strong> ${ua !== null ? q.options[ua] : 'æœªå›ç­”'}</p>
            <p><strong>æ­£è§£:</strong> ${q.options[q.answer]}</p>
            <p><strong>èª¬æ˜:</strong> ${q.explanation}</p>
          </div>
        `;
      });

      html += `<button class="nav-button" onclick="restartQuiz()">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã™ã‚‹</button>`;
      $('result-container').innerHTML = html;

      if(pct === 100){
        const a = $('attendance-link');
        a.style.display = 'block';
        a.innerHTML = `<p>ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼å…¨å•æ­£è§£ã§ã™ã€‚</p>
          <a href="https://forms.gle/Uun3fT1xUG7bybSB6" target="_blank" rel="noopener">å‡ºå¸­ç¢ºèªãƒ•ã‚©ãƒ¼ãƒ ã«å›ç­”ã™ã‚‹</a>`;
      }
    }

    window.restartQuiz = function(){
      $('quiz-container').style.display = 'block';
      $('result-container').innerHTML = '';
      $('attendance-link').style.display = 'none';
      initQuiz();
    };

    // èµ·å‹•
    initTheme();
    initQuiz();
  </script>
</body>
</html>
